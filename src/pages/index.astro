---
import Layout from '../layouts/Layout.astro';

// ============================================
// EDIT THIS: Your selected projects for homepage
// ============================================
const selectedProjects = [
  {
    slug: "openvpn-automation",
    title: "Project Title Here",
    description: "One sentence describing what this project does and what problem it solves.",
    tags: ["Tag1", "Tag2", "Tag3"],
  },
  {
    slug: "hivebox",
    title: "Project Title Here",
    description: "One sentence describing what this project does and what problem it solves.",
    tags: ["Tag1", "Tag2", "Tag3"],
  },
  {
    slug: "email-db-automation",
    title: "Project Title Here",
    description: "One sentence describing what this project does and what problem it solves.",
    tags: ["Tag1", "Tag2", "Tag3"],
  },
];
---

<Layout title="Gabriel Palmar | Solutions Engineer" activeNav="home">
  
  <!-- ==================== HERO / VALUE PROP ==================== -->
  <section class="hero">
    <div class="hero-bg">
      <div class="grid-overlay"></div>
      <div class="glow glow-1"></div>
      <div class="glow glow-2"></div>
    </div>
    
    <div class="hero-container">
      <div class="hero-badge">
        <span class="badge-dot"></span>
        <span>Available for new opportunities</span>
      </div>
      
      <h1 class="hero-title">
        <span class="title-line">Solving Complex  Challenges</span>
        <span class="title-line title-accent">With Automation and Real-World Experience</span>
      </h1>
      
      <p class="hero-subtitle">
        I help companies and technical teams design and deliver secure, scalable cloud and network infrastructure, while continuously growing my skills to create long-term value for both the business and myself.
      </p>

      <div class="hero-role">
        <span class="role-text" id="roleText">Technical Support</span>
      </div>

      <div class="hero-actions">
        <a href="/projects" class="btn btn-primary">
          <span>View My Work</span>
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
        </a>
        <a href="/contact" class="btn btn-secondary">
          <span>Get in Touch</span>
        </a>
      </div>
    </div>
  </section>

  <!-- ==================== WHAT I SOLVE ==================== -->
<section class="problems">
  <div class="container">
    <div class="section-header">
      <span class="section-label">What I Solve</span>
      <h2 class="section-title">Problems I Help Teams Tackle</h2>
    </div>
    
    <div class="problems-grid">
      <!-- Problem 1 -->
      <div class="problem-card">
        <div class="problem-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <line x1="12" y1="16" x2="12.01" y2="16"></line>
          </svg>
        </div>
        <h3>Product Fit & Reliability Challenges</h3>
        <p>
          Teams often struggle to integrate products into their existing technologies or cloud providers, leading to instability, recurring issues, 
          and operational risk. Without clear ownership, problems persist and impact critical workloads.
        </p>
        <span class="problem-solution">→ I diagnose root causes and deliver resilient, long-term solutions with ongoing support</span>
      </div>
      
      <!-- Problem 2 -->
      <div class="problem-card">
        <div class="problem-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
          </svg>
        </div>
        <h3>Scalability, Change, and Security Risks</h3>
        <p>
          Systems that are not designed to adapt over time lead to downtime, security gaps, and fragile architectures that fail as requirements evolve. 
          Resulting in fragile architectures that fail as requirements evolve and scale across changing businesses.
        </p>
        <span class="problem-solution">→ I design adaptable, secure solutions that minimize downtime and remain resilient over time</span>
      </div>
      
      <!-- Problem 3 -->
      <div class="problem-card">
        <div class="problem-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
          </svg>
        </div>
        <h3>Team Alignment & Knowledge Gaps</h3>
        <p>
          Without strong leadership, shared knowledge, and empathy, teams struggle to collaborate effectively, slowing progress and reducing customer trust.
          This creates friction internally and limits long-term customer success.
        </p>
        <span class="problem-solution">→ I lead with empathy, example, and ownership to help teams and organizations succeed</span>
      </div>
    </div>
  </div>
</section>

  <!-- ==================== SELECTED PROJECTS ==================== -->
  <section class="selected-projects">
    <div class="container">
      <div class="section-header">
        <span class="section-label">Selected Work</span>
        <h2 class="section-title">Featured Projects</h2>
        <p class="section-description">
          A few examples of problems I've solved and systems I've built.
        </p>
      </div>
      
      <div class="projects-grid">
        {selectedProjects.map((project) => (
          <a href={`/projects/${project.slug}`} class="project-card">
            <div class="project-content">
              <h3 class="project-title">{project.title}</h3>
              <p class="project-description">{project.description}</p>
              <div class="project-tags">
                {project.tags.map((tag) => (
                  <span class="tag">{tag}</span>
                ))}
              </div>
            </div>
            <div class="project-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
              </svg>
            </div>
          </a>
        ))}
      </div>
      
      <div class="projects-cta">
        <a href="/projects" class="btn btn-secondary">
          View All Projects
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- ==================== CTA SECTION ==================== -->
  <section class="cta-section">
    <div class="container">
      <div class="cta-content">
        <h2>Let's Work Together</h2>
        <p>
          If you need help with cloud infrastructure, secure access, or designing resilient architectures.
          I'd love to hear about the challenges you're solving!
        </p>
        <a href="/contact" class="btn btn-primary">
          Start a Conversation
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
        </a>
      </div>
    </div>
  </section>
  
</Layout>

<style>
  /* Hero */
  .hero {
    min-height: 90vh;
    display: flex;
    align-items: center;
    position: relative;
    padding: 8rem 2rem 4rem;
    overflow: hidden;
  }

  .hero-bg {
    position: absolute;
    inset: 0;
    pointer-events: none;
  }

  .grid-overlay {
    position: absolute;
    inset: 0;
    background-image: 
      linear-gradient(rgba(34, 211, 238, 0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(34, 211, 238, 0.03) 1px, transparent 1px);
    background-size: 60px 60px;
    mask-image: radial-gradient(ellipse at center, black 0%, transparent 70%);
  }

  .glow {
    position: absolute;
    border-radius: 50%;
    filter: blur(100px);
  }

  .glow-1 {
    width: 600px;
    height: 600px;
    background: var(--color-accent);
    top: -200px;
    right: -100px;
    opacity: 0.15;
  }

  .glow-2 {
    width: 400px;
    height: 400px;
    background: #8b5cf6;
    bottom: 0;
    left: -100px;
    opacity: 0.1;
  }

  .hero-container {
    max-width: 900px;
    margin: 0 auto;
    text-align: center;
    position: relative;
    z-index: 1;
  }

  .hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: var(--color-bg-card);
    border: 1px solid var(--color-border);
    border-radius: 100px;
    font-size: 0.875rem;
    color: var(--color-text-muted);
    margin-bottom: 2rem;
  }

  .badge-dot {
    width: 8px;
    height: 8px;
    background: var(--color-success);
    border-radius: 50%;
    animation: pulse 2s ease-in-out infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }

  .hero-title {
    font-size: clamp(1.75rem, 4.5vw, 2.5rem);
    font-weight: 700;
    line-height: 1.1;
    margin-bottom: 1.5rem;
  }

  .title-line {
    display: block;
  }

  .title-accent {
    background: linear-gradient(135deg, var(--color-accent) 0%, #a78bfa 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .hero-subtitle {
    font-size: 1.25rem;
    color: var(--color-text-muted);
    line-height: 1.7;
    max-width: 700px;
    margin: 0 auto 1.5rem;
  }

  .hero-role {
    margin-bottom: 2rem;
    min-height: 2.5rem;
  }

  .role-text {
    font-family: var(--font-mono);
    font-size: 1.375rem;
    font-weight: 600;
    color: var(--color-accent);
    display: inline-block;
    min-height: 2rem;
  }

  .role-text::after {
    content: '|';
    animation: blink 1s infinite;
    margin-left: 2px;
  }

  @keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }

  .hero-actions {
    display: flex;
    justify-content: center;
    gap: 1rem;
  }

  .btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.875rem 1.5rem;
    font-size: 0.9375rem;
    font-weight: 500;
    border-radius: 8px;
    transition: all 0.2s ease;
  }

  .btn-primary {
    background: var(--color-accent);
    color: var(--color-bg);
  }

  .btn-primary:hover {
    background: var(--color-text);
    transform: translateY(-2px);
  }

  .btn-secondary {
    background: var(--color-bg-card);
    border: 1px solid var(--color-border);
    color: var(--color-text);
  }

  .btn-secondary:hover {
    border-color: var(--color-accent);
    color: var(--color-accent);
  }

  /* Sections */
  .container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 0 2rem;
  }

  .section-header {
    text-align: center;
    margin-bottom: 2.5rem;
  }

  .section-label {
    display: inline-block;
    font-family: var(--font-mono);
    font-size: 0.8125rem;
    color: var(--color-accent);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 1rem;
  }

  .section-title {
    font-size: clamp(2rem, 5vw, 2.75rem);
    font-weight: 700;
    color: var(--color-text);
    margin-bottom: 1rem;
  }

  .section-description {
    font-size: 1.125rem;
    color: var(--color-text-muted);
    max-width: 600px;
    margin: 0 auto;
  }

  /* Problems Section */
  .problems {
    padding: 5rem 2rem;
    background: var(--color-bg-elevated);
  }

  .problems-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2rem;
  }

  .problem-card {
    display: flex;
    flex-direction: column;
    background: var(--color-bg-card);
    border: 1px solid var(--color-border);
    border-radius: 16px;
    padding: 2rem;
    transition: all 0.3s ease;
  }

  .problem-card:hover {
    border-color: var(--color-accent);
    transform: translateY(-4px);
  }

  .problem-icon {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--color-accent-glow);
    border-radius: 12px;
    color: var(--color-accent);
    margin-bottom: 1.5rem;
  }

  .problem-card h3 {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--color-text);
    margin-bottom: 0.75rem;
  }

  .problem-card p {
    font-size: 0.9375rem;
    color: var(--color-text-muted);
    line-height: 1.7;
    margin-bottom: 1.5rem;
    flex-grow: 1;
  }

  .problem-solution {
    font-family: var(--font-mono);
    font-size: 0.8125rem;
    color: var(--color-accent);
  }

  /* Selected Projects */
  .selected-projects {
    padding: 5rem 2rem;
  }

  .projects-grid {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    margin-bottom: 3rem;
  }

  .project-card {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--color-bg-card);
    border: 1px solid var(--color-border);
    border-radius: 16px;
    padding: 2rem;
    transition: all 0.3s ease;
  }

  .project-card:hover {
    border-color: var(--color-accent);
    transform: translateX(8px);
  }

  .project-content {
    flex: 1;
  }

  .project-title {
    font-size: 1.375rem;
    font-weight: 600;
    color: var(--color-text);
    margin-bottom: 0.5rem;
  }

  .project-description {
    font-size: 0.9375rem;
    color: var(--color-text-muted);
    margin-bottom: 1rem;
    max-width: 600px;
  }

  .project-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .tag {
    font-size: 0.75rem;
    font-weight: 500;
    padding: 0.375rem 0.75rem;
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    border-radius: 100px;
    color: var(--color-text-dim);
  }

  .project-arrow {
    color: var(--color-text-dim);
    transition: all 0.3s ease;
  }

  .project-card:hover .project-arrow {
    color: var(--color-accent);
    transform: translateX(4px);
  }

  .projects-cta {
    text-align: center;
  }

  /* CTA Section */
  .cta-section {
    padding: 6rem 2rem;
    background: var(--color-bg-elevated);
  }

  .cta-content {
    max-width: 600px;
    margin: 0 auto;
    text-align: center;
  }

  .cta-content h2 {
    font-size: 2rem;
    font-weight: 700;
    color: var(--color-text);
    margin-bottom: 1rem;
  }

  .cta-content p {
    font-size: 1.125rem;
    color: var(--color-text-muted);
    margin-bottom: 2rem;
    max-width: 1000px;
    margin-left: auto;
    margin-right: auto;
  }

  @media (max-width: 900px) {
    .problems-grid {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 640px) {
    .hero {
      padding: 7rem 1.5rem 3rem;
    }

    .hero-actions {
      flex-direction: column;
    }

    .problems,
    .selected-projects,
    .cta-section {
      padding: 5rem 1.5rem;
    }

    .project-card {
      flex-direction: column;
      align-items: flex-start;
      gap: 1rem;
    }

    .project-arrow {
      display: none;
    }
  }
</style>

<script>
  const roles = [
    'Technical Support',
    'Cloud Engineer',
    'Solutions Engineer',
    'DevOps',
    'Pre-Sales Engineer',
    'Platform Engineer',
    'SRE',
    'Tech Lead'
  ];

  let currentRoleIndex = 0;
  let currentText = '';
  let isDeleting = false;
  let charIndex = 0;

  const roleTextElement = document.getElementById('roleText');

  if (!roleTextElement) {
    console.error('Role text element not found');
  } else {
    function typeWriter() {
      const currentRole = roles[currentRoleIndex];

      if (!isDeleting) {
        // Typing
        currentText = currentRole.substring(0, charIndex + 1);
        charIndex++;

        if (charIndex === currentRole.length) {
          // Finished typing, wait before deleting
          setTimeout(() => {
            isDeleting = true;
            typeWriter();
          }, 2000);
          if (roleTextElement) roleTextElement.textContent = currentText;
          return;
        }
      } else {
        // Deleting
        currentText = currentRole.substring(0, charIndex - 1);
        charIndex--;

        if (charIndex === 0) {
          // Finished deleting, move to next role
          isDeleting = false;
          currentRoleIndex = (currentRoleIndex + 1) % roles.length;
          setTimeout(typeWriter, 500);
          if (roleTextElement) roleTextElement.textContent = currentText;
          return;
        }
      }

      if (roleTextElement) roleTextElement.textContent = currentText;

      // Typing speed
      const speed = isDeleting ? 50 : 100;
      setTimeout(typeWriter, speed);
    }

    // Start the animation
    typeWriter();
  }
</script>
